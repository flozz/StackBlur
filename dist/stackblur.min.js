!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).StackBlur={})}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function o(t,n,r,o,a){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"===e(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var i=t.getContext("2d");try{return i.getImageData(n,r,o,a)}catch(t){throw new Error("unable to access image data: "+t)}}function a(t,e,n,r,a,f){if(!(isNaN(f)||f<1)){f|=0;var g=o(t,e,n,r,a);g=i(g,e,n,r,a,f),t.getContext("2d").putImageData(g,e,n)}}function i(t,e,o,a,i,f){var g,c,l,s,x,b,d,y,p,h,m,v,w,B,C,E,I,S,N,R,D,G,j,A,W,k=t.data,H=2*f+1,T=a-1,_=i-1,M=f+1,O=M*(M+1)/2,P=new u,q=P;for(l=1;l<H;l++)q=q.next=new u,l===M&&(W=q);q.next=P;var z=null,F=null;d=b=0;var J=n[f],K=r[f];for(c=0;c<i;c++){for(E=I=S=N=y=p=h=m=0,v=M*(R=k[b]),w=M*(D=k[b+1]),B=M*(G=k[b+2]),C=M*(j=k[b+3]),y+=O*R,p+=O*D,h+=O*G,m+=O*j,q=P,l=0;l<M;l++)q.r=R,q.g=D,q.b=G,q.a=j,q=q.next;for(l=1;l<M;l++)s=b+((T<l?T:l)<<2),y+=(q.r=R=k[s])*(A=M-l),p+=(q.g=D=k[s+1])*A,h+=(q.b=G=k[s+2])*A,m+=(q.a=j=k[s+3])*A,E+=R,I+=D,S+=G,N+=j,q=q.next;for(z=P,F=W,g=0;g<a;g++)k[b+3]=j=m*J>>K,0!==j?(j=255/j,k[b]=(y*J>>K)*j,k[b+1]=(p*J>>K)*j,k[b+2]=(h*J>>K)*j):k[b]=k[b+1]=k[b+2]=0,y-=v,p-=w,h-=B,m-=C,v-=z.r,w-=z.g,B-=z.b,C-=z.a,s=d+((s=g+f+1)<T?s:T)<<2,y+=E+=z.r=k[s],p+=I+=z.g=k[s+1],h+=S+=z.b=k[s+2],m+=N+=z.a=k[s+3],z=z.next,v+=R=F.r,w+=D=F.g,B+=G=F.b,C+=j=F.a,E-=R,I-=D,S-=G,N-=j,F=F.next,b+=4;d+=a}for(g=0;g<a;g++){for(I=S=N=E=p=h=m=y=0,v=M*(R=k[b=g<<2]),w=M*(D=k[b+1]),B=M*(G=k[b+2]),C=M*(j=k[b+3]),y+=O*R,p+=O*D,h+=O*G,m+=O*j,q=P,l=0;l<M;l++)q.r=R,q.g=D,q.b=G,q.a=j,q=q.next;for(x=a,l=1;l<=f;l++)b=x+g<<2,y+=(q.r=R=k[b])*(A=M-l),p+=(q.g=D=k[b+1])*A,h+=(q.b=G=k[b+2])*A,m+=(q.a=j=k[b+3])*A,E+=R,I+=D,S+=G,N+=j,q=q.next,l<_&&(x+=a);for(b=g,z=P,F=W,c=0;c<i;c++)k[(s=b<<2)+3]=j=m*J>>K,j>0?(j=255/j,k[s]=(y*J>>K)*j,k[s+1]=(p*J>>K)*j,k[s+2]=(h*J>>K)*j):k[s]=k[s+1]=k[s+2]=0,y-=v,p-=w,h-=B,m-=C,v-=z.r,w-=z.g,B-=z.b,C-=z.a,s=g+((s=c+M)<_?s:_)*a<<2,y+=E+=z.r=k[s],p+=I+=z.g=k[s+1],h+=S+=z.b=k[s+2],m+=N+=z.a=k[s+3],z=z.next,v+=R=F.r,w+=D=F.g,B+=G=F.b,C+=j=F.a,E-=R,I-=D,S-=G,N-=j,F=F.next,b+=a}return t}function f(t,e,n,r,a,i){if(!(isNaN(i)||i<1)){i|=0;var f=o(t,e,n,r,a);f=g(f,e,n,r,a,i),t.getContext("2d").putImageData(f,e,n)}}function g(t,e,o,a,i,f){var g,c,l,s,x,b,d,y,p,h,m,v,w,B,C,E,I,S,N,R,D,G=t.data,j=2*f+1,A=a-1,W=i-1,k=f+1,H=k*(k+1)/2,T=new u,_=T;for(l=1;l<j;l++)_=_.next=new u,l===k&&(D=_);_.next=T;var M=null,O=null;d=b=0;var P=n[f],q=r[f];for(c=0;c<i;c++){for(B=C=E=y=p=h=0,m=k*(I=G[b]),v=k*(S=G[b+1]),w=k*(N=G[b+2]),y+=H*I,p+=H*S,h+=H*N,_=T,l=0;l<k;l++)_.r=I,_.g=S,_.b=N,_=_.next;for(l=1;l<k;l++)s=b+((A<l?A:l)<<2),y+=(_.r=I=G[s])*(R=k-l),p+=(_.g=S=G[s+1])*R,h+=(_.b=N=G[s+2])*R,B+=I,C+=S,E+=N,_=_.next;for(M=T,O=D,g=0;g<a;g++)G[b]=y*P>>q,G[b+1]=p*P>>q,G[b+2]=h*P>>q,y-=m,p-=v,h-=w,m-=M.r,v-=M.g,w-=M.b,s=d+((s=g+f+1)<A?s:A)<<2,y+=B+=M.r=G[s],p+=C+=M.g=G[s+1],h+=E+=M.b=G[s+2],M=M.next,m+=I=O.r,v+=S=O.g,w+=N=O.b,B-=I,C-=S,E-=N,O=O.next,b+=4;d+=a}for(g=0;g<a;g++){for(C=E=B=p=h=y=0,m=k*(I=G[b=g<<2]),v=k*(S=G[b+1]),w=k*(N=G[b+2]),y+=H*I,p+=H*S,h+=H*N,_=T,l=0;l<k;l++)_.r=I,_.g=S,_.b=N,_=_.next;for(x=a,l=1;l<=f;l++)b=x+g<<2,y+=(_.r=I=G[b])*(R=k-l),p+=(_.g=S=G[b+1])*R,h+=(_.b=N=G[b+2])*R,B+=I,C+=S,E+=N,_=_.next,l<W&&(x+=a);for(b=g,M=T,O=D,c=0;c<i;c++)G[s=b<<2]=y*P>>q,G[s+1]=p*P>>q,G[s+2]=h*P>>q,y-=m,p-=v,h-=w,m-=M.r,v-=M.g,w-=M.b,s=g+((s=c+k)<W?s:W)*a<<2,y+=B+=M.r=G[s],p+=C+=M.g=G[s+1],h+=E+=M.b=G[s+2],M=M.next,m+=I=O.r,v+=S=O.g,w+=N=O.b,B-=I,C-=S,E-=N,O=O.next,b+=a}return t}var u=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};t.BlurStack=u,t.canvasRGB=f,t.canvasRGBA=a,t.image=function(t,e,n,r,o){if("string"==typeof t&&(t=document.getElementById(t)),t&&"naturalWidth"in t){var i=o?"offset":"natural",g=t[i+"Width"],u=t[i+"Height"];if("string"==typeof e&&(e=document.getElementById(e)),e&&"getContext"in e){e.style.width=g+"px",e.style.height=u+"px",e.width=g,e.height=u;var c=e.getContext("2d");c.clearRect(0,0,g,u),c.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,g,u),isNaN(n)||n<1||(r?a(e,0,0,g,u,n):f(e,0,0,g,u,n))}}},t.imageDataRGB=g,t.imageDataRGBA=i,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=stackblur.min.js.map
